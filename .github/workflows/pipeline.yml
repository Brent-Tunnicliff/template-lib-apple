# Copyright Â© 2025 Brent Tunnicliff <brent@tunnicliff.dev>

name: Pipeline

on:
  push:
  workflow_dispatch:

jobs:
  pipeline:
    runs-on: macos-15
    strategy:
      matrix:
        target: [
          { platform: "iOS", simulator_version: "18" },
          { platform: "macOS", simulator_version: "" },
          { platform: "tvOS", simulator_version: "18" },
          { platform: "watchOS", simulator_version: "11" },
          { platform: "visionOS", simulator_version: "2" }
        ]
    steps:
      - name: List installed simulators
        run: xcrun simctl list devices
      - id: destination
        uses: Brent-Tunnicliff/action-xcodebuild-destination-apple@58f1ad40ed684597e919ce52c48e22358b091f1d
        with:
          platform: "${{ matrix.target.platform }}"
          simulator_version: "${{ matrix.target.simulator_version }}"
      - name: Test
        run: echo "${{ steps.destination.outputs.destination }}"